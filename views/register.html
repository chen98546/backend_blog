<!-- 继承公共模板 -->
{{extend './common/page.html'}}



<!-- 头部区域 -->
{{block 'title'}}

<title>博客后台登录系统</title>
<link rel="stylesheet" href="/layui/css/layui.css">
<link rel="stylesheet" href="/css/login.css">
<style>
    #intro {
        width: 300px;
        background-color: #2d2b3d;
        border-color: #242130;
        padding: 5px 9px;
        border-radius: 4px;
    }
</style>
{{/block}}




<!-- body主体内容区域 -->
{{block 'content'}}

<div class="login">
    <h1>博客后台注册系统</h1>
    <form class="layui-form" id="registerForm" method="post">
        <div class="layui-form-item">
            <input type="text" name="username" placeholder="请输入用户名称" autocomplete="off">
        </div>

        <div class="layui-form-item">
            <input type="password" name="password" placeholder="请输入账号密码" autocomplete="off">
        </div>

        <!-- <div class="layui-form-item">
            <input type="number" name="author" placeholder="请输入id" autocomplete="off">
        </div> -->

        <div class="layui-form-item">
            <!-- <textarea name="intro"></textarea> -->
            <textarea name="intro" id="intro" rows="5" placeholder="请输入个性签名"></textarea>
        </div>

        <div class="layui-form-item">
            <button id="registerBtn" class="btn-primary btn-block btn-large layui-btn" lay-submit
                lay-filter="registerBtn">注册</button>
        </div>

        <div class="layui-form-item">
            <a href="/login" class="btn-primary btn-block btn-large layui-btn" lay-submit>返回登录</a>
        </div>
    </form>

</div>



{{/block}}





{{block 'script'}}

<!-- <script src="/js/jquery.min.js"></script> -->
<script src="/layui/layui.js"></script>
<script>
    layui.use('form', function () {
        let form = layui.form;
        let $ = layui.$;
        // 判断input值是否为空的正则表达式
        let reg = /^\s*$/;
        // 判断用户名是否正确的正则表达式
        let regUser = /^[a-zA-Z0-9_\u4e00-\u9fa5]{5,15}$/;
        // 判断密码是否正确的正则表达式
        let regPwd = /^[a-zA-Z0-9_]{6,15}$/;
        // 特殊字符正则表达式
        let regSpecial = /[`~!@#$%^&*()_+<>?:"{},.\/;'[\]]/im;
        //监听提交
        form.on('submit(registerBtn)', function (data) {
            if (reg.test(data.field.username) || reg.test(data.field.password)) {
                layer.msg('账号或密码不能为空')
                return false
            } else if (regSpecial.test(data.field.username) || regSpecial.test(data.field.password)) {
                layer.msg('名称或密码不能包含特殊字符')
                return false
            } else if (!regUser.test(data.field.username)) {
                layer.msg('账号格式不正确')
                return false
            } else if (!regPwd.test(data.field.password)) {
                layer.msg('密码格式不正确')
                return false
            }
            $.ajax({
                type: 'post',
                url: '/registerData',
                data: data.field,
            }).then(res => {
                if (res.code == 0) {
                    layer.msg(res.message);
                    location.href = '/login'
                }
            })
        })

        return false;

    });
</script>

{{/block}}