<!-- 继承公共模板 -->
{{extend './common/page.html'}}

<!-- 头部区域 -->
{{block 'title'}}

<title>设置页面</title>
<link rel="stylesheet" href="/layui/css/layui.css">
<style>
    #form .logo {
        width: 100px;
    }

    #form input {
        width: 200px;
    }
</style>

{{/block}}



<!-- body主体内容区域 -->
{{block 'content'}}
<div class="layui-layout layui-layout-admin">

    <!-- 头部菜单栏 -->
    {{include "./common/header.html"}}

    <!-- 左侧菜单栏 -->
    {{include "./common/leftMenu.html"}}



    <div class="layui-body">
        <!-- 内容主体区域 -->
        <div style="padding: 15px;" id="content">
            <form class="layui-form" action="" id="form">
                <div class="layui-form-item">
                    <label class="layui-form-label logo">修改LOGO：</label>
                    <div class="layui-input-block">
                        <input type="text" name="logoName" required lay-verify="required" placeholder="请输入新的LOGO名称"
                            autocomplete="off" class="layui-input" id="logoName">
                    </div>
                </div>

                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <button class="layui-btn" lay-submit lay-filter="formDemo">确认修改</button>
                        <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                    </div>
                </div>
            </form>

        </div>
    </div>


    <!-- 底部 -->
    {{include "./common/footer.html"}}

</div>
{{/block}}





<!-- js内容区域 -->
{{block 'script'}}

<script src="/layui/layui.js"></script>
<script src="/js/layuiCommon.js"></script>
<script>
    layui.use('form', function () {
        let form = layui.form;
        let $ = layui.$;

        // 监听提交
        form.on('submit(formDemo)', function (data) {

            layer.confirm('确认修改', function (index) {
                layer.close(index);

                $.ajax({
                    url: '/settingsPut',
                    type: 'put',
                    data: data.field,
                }).then(res => {
                    localStorage.setItem('logoName', data.field.logoName);
                    $('.layui-logo').text(data.field.logoName);
                    $('#logoName').val('');
                })
            });

            return false;
        });
    });
</script>
{{/block}}